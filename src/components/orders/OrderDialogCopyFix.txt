// Reemplazo completo de lÃ­neas 151-195 en OrderDialog.tsx

        // ðŸ’µ Vuelto: Mostrar cada parte en su moneda correcta segÃºn mÃ©todo
        if (difference > 0.01) {
            const bcvEurRate = Number(order.bcv_eur_rate || 0);
            
            // Helper: determinar si un mÃ©todo es en BolÃ­vares
            const isMethodVes = (method: string) => 
                ["PAGOMOVIL", "BOLIVARES_PAGOMOVIL", "BOLIVARES_EFECTIVO", "BOLIVARES_TRANSFERENCIA", "TRANSFERENCIA_BANCARIA_BOLIVARES"].includes(method);

            if (order.change_covered_by === 'partial') {
                // DistribuciÃ³n mixta: cada parte en su moneda
                const companyUSD = Number(order.change_amount_company || 0);
                const agencyUSD = Number(order.change_amount_agency || 0);
                
                const companyMethod = order.change_method_company || '';
                const agencyMethod = order.change_method_agency || '';
                
                const companyInVes = isMethodVes(companyMethod);
                const agencyInVes = isMethodVes(agencyMethod);
                
                paymentInfo += `\nðŸ’µ *Vuelto a entregar:*`;
                
                if (companyInVes) {
                    const companyBs = companyUSD * bcvEurRate;
                    paymentInfo += `\n   â€¢ Empresa: ${fmtMoney(companyBs, 'VES')}`;
                } else {
                    paymentInfo += `\n   â€¢ Empresa: $${companyUSD.toFixed(2)}`;
                }
                
                if (agencyInVes) {
                    const agencyBs = agencyUSD * bcvEurRate;
                    paymentInfo += `\n   â€¢ Agencia: ${fmtMoney(agencyBs, 'VES')}`;
                } else {
                    paymentInfo += `\n   â€¢ Agencia: $${agencyUSD.toFixed(2)}`;
                }
            } else if (order.change_covered_by === 'agency') {
                const method = order.change_method_agency || '';
                if (isMethodVes(method)) {
                    const changeInBs = difference * bcvEurRate;
                    paymentInfo += `\nðŸ’µ *Vuelto a entregar (Bs):* ${fmtMoney(changeInBs, 'VES')}`;
                    paymentInfo += `\n   â€¢ Agencia: ${fmtMoney(changeInBs, 'VES')}`;
                } else {
                    paymentInfo += `\nðŸ’µ *Vuelto a entregar (USD):* $${difference.toFixed(2)}`;
                    paymentInfo += `\n   â€¢ Agencia: $${difference.toFixed(2)}`;
                }
            } else if (order.change_covered_by === 'company') {
                const method = order.change_method_company || '';
                if (isMethodVes(method)) {
                    const changeInBs = difference * bcvEurRate;
                    paymentInfo += `\nðŸ’µ *Vuelto a entregar (Bs):* ${fmtMoney(changeInBs, 'VES')}`;
                    paymentInfo += `\n   â€¢ Empresa: ${fmtMoney(changeInBs, 'VES')}`;
                } else {
                    paymentInfo += `\nðŸ’µ *Vuelto a entregar (USD):* $${difference.toFixed(2)}`;
                    paymentInfo += `\n   â€¢ Empresa: $${difference.toFixed(2)}`;
                }
            }
        }
